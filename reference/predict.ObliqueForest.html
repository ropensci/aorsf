<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Compute predicted values from an oblique random forest. Predictions
may be returned in aggregate (i.e., averaging over all the trees)
or tree-specific."><title>Prediction for ObliqueForest Objects — predict.ObliqueForest • aorsf</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prediction for ObliqueForest Objects — predict.ObliqueForest"><meta property="og:description" content="Compute predicted values from an oblique random forest. Predictions
may be returned in aggregate (i.e., averaging over all the trees)
or tree-specific."><meta property="og:image" content="https://bcjaeger.github.io/aorsf/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">aorsf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/aorsf.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/pd.html">PD and ICE curves with ORSF</a>
    <a class="dropdown-item" href="../articles/oobag.html">Out-of-bag predictions and evaluation</a>
    <a class="dropdown-item" href="../articles/fast.html">Tips to speed up computation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/aorsf/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prediction for ObliqueForest Objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/aorsf/blob/HEAD/R/orsf_predict.R" class="external-link"><code>R/orsf_predict.R</code></a></small>
      <div class="d-none name"><code>predict.ObliqueForest.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Compute predicted values from an oblique random forest. Predictions
may be returned in aggregate (i.e., averaging over all the trees)
or tree-specific.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for ObliqueForest</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  new_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pred_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pred_horizon <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pred_aggregate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pred_simplify <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  oobag <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  na_action <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  boundary_checks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  n_thread <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose_progress <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>(<em>ObliqueForest</em>) a trained oblique random forest object (see <a href="orsf.html">orsf</a>).</p></dd>


<dt>new_data</dt>
<dd><p>a <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a>, <a href="https://tibble.tidyverse.org/reference/tibble-package.html" class="external-link">tibble</a>, or <a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a> to compute predictions in.</p></dd>


<dt>pred_type</dt>
<dd><p>(<em>character</em>) the type of predictions to compute. Valid
options for survival are:</p><ul><li><p>'risk' : probability of having an event at or before <code>pred_horizon</code>.</p></li>
<li><p>'surv' : 1 - risk.</p></li>
<li><p>'chf': cumulative hazard function</p></li>
<li><p>'mort': mortality prediction</p></li>
<li><p>'time': survival time prediction</p></li>
</ul><p>For classification:</p><ul><li><p>'prob': probability for each class</p></li>
<li><p>'class': predicted class</p></li>
</ul><p>For regression:</p><ul><li><p>'mean': predicted mean, i.e., the expected value</p></li>
</ul></dd>


<dt>pred_horizon</dt>
<dd><p>(<em>double</em>) Only relevent for survival forests.
A value or vector indicating the time(s) that predictions will be
calibrated to. E.g., if you were predicting risk of incident heart
failure within the next 10 years, then <code>pred_horizon = 10</code>.
<code>pred_horizon</code> can be <code>NULL</code> if <code>pred_type</code> is <code>'mort'</code>, since
mortality predictions are aggregated over all event times</p></dd>


<dt>pred_aggregate</dt>
<dd><p>(<em>logical</em>) If <code>TRUE</code> (the default), predictions
will be aggregated over all trees by taking the mean. If <code>FALSE</code>, the
returned output will contain one row per observation and one column
for each tree. If the length of <code>pred_horizon</code> is two or more and
<code>pred_aggregate</code> is <code>FALSE</code>, then the result will be a list of such
matrices, with the i'th item in the list corresponding to the i'th
value of <code>pred_horizon</code>.</p></dd>


<dt>pred_simplify</dt>
<dd><p>(<em>logical</em>) If <code>FALSE</code> (the default), predictions
will always be returned in a numeric matrix or a list of numeric matrices.
If <code>TRUE</code>, predictions may be simplified to a vector, e.g., if <code>pred_type</code>
is <code>'mort'</code> for survival or <code>'class'</code> for classification, or an array of
matrices if <code>length(pred_horizon) &gt; 1</code>.</p></dd>


<dt>oobag</dt>
<dd><p>(<em>logical</em>) If <code>FALSE</code> (the default), predictions will
be computed using all trees for each observation. If <code>TRUE</code>, then
out-of-bag predictions will be computed. This input parameter should
only be set to <code>TRUE</code> if <code>new_data</code> is <code>NULL</code>.</p></dd>


<dt>na_action</dt>
<dd><p>(<em>character</em>) what should happen when <code>new_data</code> contains missing values (i.e., <code>NA</code> values). Valid options are:</p><ul><li><p>'fail' : an error is thrown if <code>new_data</code> contains <code>NA</code> values</p></li>
<li><p>'pass' : the output will have <code>NA</code> in all rows where <code>new_data</code> has 1 or more <code>NA</code> value for the predictors used by <code>object</code></p></li>
<li><p>'omit' : rows in <code>new_data</code> with incomplete data will be dropped</p></li>
<li><p>'impute_meanmode' : missing values for continuous and categorical variables in <code>new_data</code> will be imputed using the mean and mode, respectively. To clarify,
the mean and mode used to impute missing values are from the
training data of <code>object</code>, not from <code>new_data</code>.</p></li>
</ul></dd>


<dt>boundary_checks</dt>
<dd><p>(<em>logical</em>) if <code>TRUE</code>, <code>pred_horizon</code> will be
checked to make sure the requested values are less than the maximum
observed time in <code>object</code>'s training data. If <code>FALSE</code>, these checks
are skipped.</p></dd>


<dt>n_thread</dt>
<dd><p>(<em>integer</em>) number of threads to use while computing predictions. Default is 0, which allows a suitable number of threads to be used based on availability.</p></dd>


<dt>verbose_progress</dt>
<dd><p>(<em>logical</em>) if <code>TRUE</code>, progress messages are
printed in the console. If <code>FALSE</code> (the default), nothing is printed.</p></dd>


<dt>...</dt>
<dd><p>Further arguments passed to or from other methods (not currently used).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a <code>matrix</code> of predictions. Column <code>j</code> of the matrix corresponds
to value <code>j</code> in <code>pred_horizon</code>. Row <code>i</code> of the matrix corresponds to
row <code>i</code> in <code>new_data</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>new_data</code> must have the same columns with equivalent types as the data
used to train <code>object</code>. Also, factors in <code>new_data</code> must not have levels
that were not in the data used to train <code>object</code>.</p>
<p><code>pred_horizon</code> values should not exceed the maximum follow-up time in
<code>object</code>'s training data, but if you truly want to do this, set
<code>boundary_checks = FALSE</code> and you can use a <code>pred_horizon</code> as large
as you want. Note that predictions beyond the maximum follow-up time
in the <code>object</code>'s training data are equal to predictions at the
maximum follow-up time, because <code>aorsf</code> does not estimate survival
beyond its maximum observed time.</p>
<p>If unspecified, <code>pred_horizon</code> may be automatically specified as the value
used for <code>oobag_pred_horizon</code> when <code>object</code> was created (see <a href="orsf.html">orsf</a>).</p>
    </div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
    <p></p><div class="sourceCode r"><pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/aorsf" class="external-link">aorsf</a></span><span class="op">)</span></span></code></pre><p></p></div><div class="section">
<h3 id="classification">Classification<a class="anchor" aria-label="anchor" href="#classification"></a></h3>


<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">329</span><span class="op">)</span></span>
<span></span>
<span><span class="va">index_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">penguins_orsf</span><span class="op">)</span>, <span class="fl">150</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">penguins_orsf_train</span> <span class="op">&lt;-</span> <span class="va">penguins_orsf</span><span class="op">[</span><span class="va">index_train</span>, <span class="op">]</span></span>
<span><span class="va">penguins_orsf_test</span> <span class="op">&lt;-</span> <span class="va">penguins_orsf</span><span class="op">[</span><span class="op">-</span><span class="va">index_train</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">fit_clsf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/orsf.html">orsf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_orsf_train</span>, </span>
<span>                 formula <span class="op">=</span> <span class="va">species</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span></span></code></pre><p></p></div>
<p>Predict probability for each class or the predicted class:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># predicted probabilities, the default</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit_clsf</span>, </span>
<span>        new_data <span class="op">=</span> <span class="va">penguins_orsf_test</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>,</span>
<span>        pred_type <span class="op">=</span> <span class="st">'prob'</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">##         Adelie  Chinstrap      Gentoo</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [1,] 0.9405310 0.04121955 0.018249405</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## [2,] 0.9628988 0.03455909 0.002542096</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">## [3,] 0.9032074 0.08510528 0.011687309</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">## [4,] 0.9300133 0.05209040 0.017896329</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">## [5,] 0.7965703 0.16243492 0.040994821</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># predicted class (as a matrix by default)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit_clsf</span>, </span>
<span>        new_data <span class="op">=</span> <span class="va">penguins_orsf_test</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>,</span>
<span>        pred_type <span class="op">=</span> <span class="st">'class'</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">##      [,1]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [1,]    1</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## [2,]    1</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">## [3,]    1</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">## [4,]    1</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">## [5,]    1</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># predicted class (as a factor if you use simplify)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit_clsf</span>, </span>
<span>        new_data <span class="op">=</span> <span class="va">penguins_orsf_test</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>,</span>
<span>        pred_type <span class="op">=</span> <span class="st">'class'</span>,</span>
<span>        pred_simplify <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## [1] Adelie Adelie Adelie Adelie Adelie</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## Levels: Adelie Chinstrap Gentoo</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="regression">Regression<a class="anchor" aria-label="anchor" href="#regression"></a></h3>


<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">329</span><span class="op">)</span></span>
<span></span>
<span><span class="va">index_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">penguins_orsf</span><span class="op">)</span>, <span class="fl">150</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">penguins_orsf_train</span> <span class="op">&lt;-</span> <span class="va">penguins_orsf</span><span class="op">[</span><span class="va">index_train</span>, <span class="op">]</span></span>
<span><span class="va">penguins_orsf_test</span> <span class="op">&lt;-</span> <span class="va">penguins_orsf</span><span class="op">[</span><span class="op">-</span><span class="va">index_train</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">fit_regr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/orsf.html">orsf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_orsf_train</span>, </span>
<span>                 formula <span class="op">=</span> <span class="va">bill_length_mm</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span></span></code></pre><p></p></div>
<p>Predict the mean value of the outcome:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit_regr</span>, </span>
<span>        new_data <span class="op">=</span> <span class="va">penguins_orsf_test</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>, </span>
<span>        pred_type <span class="op">=</span> <span class="st">'mean'</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">##          [,1]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [1,] 37.74136</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## [2,] 37.42367</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">## [3,] 37.04598</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">## [4,] 39.89602</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">## [5,] 39.14848</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="survival">Survival<a class="anchor" aria-label="anchor" href="#survival"></a></h3>


<p>Begin by fitting an oblique survival random forest:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">329</span><span class="op">)</span></span>
<span></span>
<span><span class="va">index_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">pbc_orsf</span><span class="op">)</span>, <span class="fl">150</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">pbc_orsf_train</span> <span class="op">&lt;-</span> <span class="va">pbc_orsf</span><span class="op">[</span><span class="va">index_train</span>, <span class="op">]</span></span>
<span><span class="va">pbc_orsf_test</span> <span class="op">&lt;-</span> <span class="va">pbc_orsf</span><span class="op">[</span><span class="op">-</span><span class="va">index_train</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">fit_surv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/orsf.html">orsf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pbc_orsf_train</span>, </span>
<span>                 formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span> <span class="op">-</span> <span class="va">id</span>,</span>
<span>                 oobag_pred_horizon <span class="op">=</span> <span class="fl">365.25</span> <span class="op">*</span> <span class="fl">5</span><span class="op">)</span></span></code></pre><p></p></div>
<p>Predict risk, survival, or cumulative hazard at one or several times:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># predicted risk, the default</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit_surv</span>, </span>
<span>        new_data <span class="op">=</span> <span class="va">pbc_orsf_test</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>, </span>
<span>        pred_type <span class="op">=</span> <span class="st">'risk'</span>, </span>
<span>        pred_horizon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">1500</span><span class="op">)</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">##             [,1]        [,2]       [,3]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [1,] 0.013648562 0.058393393 0.11184029</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## [2,] 0.003811413 0.026857586 0.04774151</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">## [3,] 0.030548361 0.100600301 0.14847107</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">## [4,] 0.040381075 0.169596943 0.27018952</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">## [5,] 0.001484698 0.006663576 0.01337655</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># predicted survival, i.e., 1 - risk</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit_surv</span>, </span>
<span>        new_data <span class="op">=</span> <span class="va">pbc_orsf_test</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>, </span>
<span>        pred_type <span class="op">=</span> <span class="st">'surv'</span>,</span>
<span>        pred_horizon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">1500</span><span class="op">)</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">##           [,1]      [,2]      [,3]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [1,] 0.9863514 0.9416066 0.8881597</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## [2,] 0.9961886 0.9731424 0.9522585</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">## [3,] 0.9694516 0.8993997 0.8515289</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">## [4,] 0.9596189 0.8304031 0.7298105</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">## [5,] 0.9985153 0.9933364 0.9866235</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># predicted cumulative hazard function</span></span>
<span><span class="co"># (expected number of events for person i at time j)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit_surv</span>, </span>
<span>        new_data <span class="op">=</span> <span class="va">pbc_orsf_test</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>, </span>
<span>        pred_type <span class="op">=</span> <span class="st">'chf'</span>,</span>
<span>        pred_horizon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">1500</span><span class="op">)</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">##             [,1]        [,2]       [,3]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [1,] 0.015395388 0.067815817 0.14942956</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## [2,] 0.004022524 0.028740305 0.05424314</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">## [3,] 0.034832754 0.127687156 0.20899732</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">## [4,] 0.059978334 0.233048809 0.42562310</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">## [5,] 0.001651365 0.007173177 0.01393016</span></span></code></pre><p></p></div>
<p>Predict mortality, defined as the number of events in the forest’s
population if all observations had characteristics like the current
observation. This type of prediction does not require you to specify a
prediction horizon</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit_surv</span>, </span>
<span>        new_data <span class="op">=</span> <span class="va">pbc_orsf_test</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>, </span>
<span>        pred_type <span class="op">=</span> <span class="st">'mort'</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">##           [,1]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">## [1,] 23.405016</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## [2,] 15.362916</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">## [3,] 26.180648</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">## [4,] 36.515629</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">## [5,]  5.856674</span></span></code></pre><p></p></div>
</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Byron Jaeger.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

